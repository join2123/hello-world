C51 COMPILER V9.57.0.0   _______LED_MAIN                                                   11/01/2021 18:25:14 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE _______LED_MAIN
OBJECT MODULE PLACED IN .\Objects\实验一_LED-main.obj
COMPILER INVOKED BY: E:\keil_v5\C51\BIN\C51.EXE 实验一_LED-main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Li
                    -stings\实验一_LED-main.lst) OBJECT(.\Objects\实验一_LED-main.obj)

line level    source

   1          //////////////////////////////////////////////////////////////////
   2          //设计项目:1个LED实验                                           //
   3          //设 计 人:王志俊                                               //
   4          //设计时间:2021.11.1                                            //
   5          //设计说明:实现一个或多个LED指示灯，按照不同要求花色运行        //
   6          //         硬件连接条件:单片机P1.0~P1.7依次连接第1个LED~第8个LED//
   7          //                                                              //
   8          //////////////////////////////////////////////////////////////////
   9          #include "STC15F2K60S2.H" 
  10          ////////函数说明//////////
  11          void led_1(void);       //2个指示灯同时亮、灭循环（间隔0.2秒）
  12          void led_2(void);               //8个指示灯同时亮、灭循环（间隔0.2秒）
  13          void led_3(void);       //8个LED依次点亮 左移右移（间隔1秒）
  14          void led_3_mov(void);   //8个LED 单一灯（LED）的左移、右移（间隔1秒）
  15          void led_4(void);               //8个指示灯从两边倒中间依次点亮（间隔1秒）
  16          void led_5(void);               //8个指示灯从中间倒两边中间依次点亮（间隔1秒）
  17          void delay02s(void);    //延时0.2s
  18          void delay1s(void);             //延时1s
  19          ////////全局变量定义////////
  20          //char data x,y;
  21          ////////SFR位重新定义////////
  22          
  23          sbit L1=P1^0;//////定义第1个指示灯的名称为L1  还可以直接采用P0_0;因为AT89X51.H内部已做定义,下依次类推
  24          sbit L2=P1^1;//////定义第2个指示灯的名称为L2 
  25          sbit L3=P1^2;//////定义第3个指示灯的名称为L3  
  26          sbit L4=P1^3;//////定义第4个指示灯的名称为L4 
  27          sbit L5=P1^4;//////定义第5个指示灯的名称为L5  
  28          sbit L6=P1^5;//////定义第6个指示灯的名称为L6 
  29          sbit L7=P1^6;//////定义第7个指示灯的名称为L7  
  30          sbit L8=P1^7;//////定义第8个指示灯的名称为L8 
  31          
  32          //主程序//
  33          void main(void)
  34          {
  35   1              while(1)
  36   1              {
  37   2                      //led_1();//2个指示灯同时亮、灭循环（间隔0.2秒）
  38   2                      //led_2();//8个指示灯同时亮、灭循环（间隔0.2秒）
  39   2                      led_3();//8个LED依次点亮 先左移 后右移（间隔1秒）
  40   2                      led_3_mov();//单一灯（LED）的左移、右移（间隔1秒）
  41   2                      led_4();//8个指示灯从两边倒中间依次点亮（间隔0.2秒）
  42   2                      led_5();//8个指示灯从中间倒两边中间依次点亮（间隔1秒）
  43   2              }
  44   1      }
  45          ///////////////////////////////////////////////////
  46          //函数名称:void led_1
  47          //函数功能:2个指示灯同时亮、灭循环（间隔0.2秒）
  48          //入口参数:无
  49          //出口参数:无
  50          //函数说明:
  51          ///////////////////////////////////////////////////
  52          void led_1(void)
  53          {
  54   1              L7 = 0;
C51 COMPILER V9.57.0.0   _______LED_MAIN                                                   11/01/2021 18:25:14 PAGE 2   

  55   1              L8 = 0;
  56   1              delay02s();
  57   1              L7 = 1;
  58   1              L8 = 1;
  59   1              delay02s();
  60   1      }
  61          
  62          ///////////////////////////////////////////////////
  63          //函数名称:void led_2
  64          //函数功能:8个指示灯同时亮、灭循环（间隔0.2秒）
  65          //入口参数:无
  66          //出口参数:无
  67          //函数说明:
  68          ///////////////////////////////////////////////////
  69          void led_2(void)
  70          {
  71   1              L1 = 0;
  72   1              L2 = 0;
  73   1              L3 = 0;
  74   1              L4 = 0;
  75   1              L5 = 0;
  76   1              L6 = 0;
  77   1              L7 = 0;
  78   1              L8 = 0;
  79   1              delay02s();
  80   1              L1 = 1;
  81   1              L2 = 1;
  82   1              L3 = 1;
  83   1              L4 = 1;
  84   1              L5 = 1;
  85   1              L6 = 1;
  86   1              L7 = 1;
  87   1              L8 = 1;
  88   1              delay02s();
  89   1      }
  90          
  91          ///////////////////////////////////////////////////
  92          //函数名称:void led_3
  93          //函数功能:8个LED的从左到右、从右到左依次点亮（间隔1秒）
  94          //入口参数:无
  95          //出口参数:无
  96          //函数说明:
  97          ///////////////////////////////////////////////////
  98          void led_3(void)
  99          {
 100   1              //////从右向左移///////
 101   1              //////////亮///////////
 102   1              L1 = 0;
 103   1              delay1s();      //延时1秒//
 104   1              L2=0;                   //第2个指示灯亮//
 105   1          delay1s();  //延时1秒//
 106   1          L3=0;                       //第3个指示灯亮//
 107   1          delay1s();  //延时1秒//
 108   1          L4=0;                       //第4个指示灯亮//
 109   1          delay1s();  //延时0.2秒//
 110   1              L5=0;                   //第5个指示灯亮//
 111   1              delay1s();      //延时0.2秒//
 112   1              L6=0;                   //第6个指示灯亮//
 113   1              delay1s();      //延时0.2秒//
 114   1              L7=0;                   //第7个指示灯亮//
 115   1              delay1s();      //延时0.2秒//
 116   1              L8=0;                   //第8个指示灯亮//
C51 COMPILER V9.57.0.0   _______LED_MAIN                                                   11/01/2021 18:25:14 PAGE 3   

 117   1              delay1s();      //延时0.2秒//
 118   1                      ///////////////灭///////////////////
 119   1                       L1=1;                  //第1个指示灯灭//
 120   1               delay1s();     //延时0.2秒//
 121   1                       L2=1;                  //第2个指示灯灭//
 122   1               delay1s();     //延时0.2秒//
 123   1                       L3=1;                  //第3个指示灯灭//
 124   1               delay1s();     //延时0.2秒//
 125   1                       L4=1;                  //第4个指示灯灭//
 126   1               delay1s();     //延时0.2秒//
 127   1                       L5=1;                  //第5个指示灯灭//
 128   1               delay1s();     //延时0.2秒//
 129   1                       L6=1;                  //第6个指示灯灭//
 130   1               delay1s();     //延时0.2秒//
 131   1                       L7=1;                  //第7个指示灯灭//
 132   1               delay1s();     //延时0.2秒//
 133   1                       L8=1;                  //第8个指示灯灭//
 134   1               delay1s();     //延时0.2秒//
 135   1                       
 136   1              //////从左到右///////
 137   1              //////////亮///////////
 138   1              L8 = 0;
 139   1              delay1s();      //延时1秒//
 140   1              L7=0;                   //第2个指示灯亮//
 141   1          delay1s();  //延时1秒//
 142   1          L6=0;                       //第3个指示灯亮//
 143   1          delay1s();  //延时1秒//
 144   1          L5=0;                       //第4个指示灯亮//
 145   1          delay1s();  //延时0.2秒//
 146   1              L4=0;                   //第5个指示灯亮//
 147   1              delay1s();      //延时0.2秒//
 148   1              L3=0;                   //第6个指示灯亮//
 149   1              delay1s();      //延时0.2秒//
 150   1              L2=0;                   //第7个指示灯亮//
 151   1              delay1s();      //延时0.2秒//
 152   1              L1=0;                   //第8个指示灯亮//
 153   1              delay1s();      //延时0.2秒//
 154   1                      ///////////////灭///////////////////
 155   1                       L1=1;                  //第1个指示灯灭//
 156   1               delay1s();     //延时0.2秒//
 157   1                       L2=1;                  //第2个指示灯灭//
 158   1               delay1s();     //延时0.2秒//
 159   1                       L3=1;                  //第3个指示灯灭//
 160   1               delay1s();     //延时0.2秒//
 161   1                       L4=1;                  //第4个指示灯灭//
 162   1               delay1s();     //延时0.2秒//
 163   1                       L5=1;                  //第5个指示灯灭//
 164   1               delay1s();     //延时0.2秒//
 165   1                       L6=1;                  //第6个指示灯灭//
 166   1               delay1s();     //延时0.2秒//
 167   1                       L7=1;                  //第7个指示灯灭//
 168   1               delay1s();     //延时0.2秒//
 169   1                       L8=1;                  //第8个指示灯灭//
 170   1               delay1s();     //延时0.2秒//   
 171   1      }
 172          
 173          
 174          
 175          
 176          ///////////////////////////////////////////////////
 177          //函数名称:void led_3mov
 178          //函数功能8个LED 单一灯（LED）的左移、右移（间隔1秒）
C51 COMPILER V9.57.0.0   _______LED_MAIN                                                   11/01/2021 18:25:14 PAGE 4   

 179          //入口参数:无
 180          //出口参数:无
 181          //函数说明:
 182          ///////////////////////////////////////////////////
 183          void led_3_mov(void)            //每个LED(移动)//                
 184          {       
 185   1      ///左移/////
 186   1              L1 = 0;
 187   1              delay1s();
 188   1              L1 = 1;
 189   1              L2 = 0;
 190   1              delay1s();
 191   1              L2 = 1;
 192   1              L3 = 0;
 193   1              delay1s();
 194   1              L3 = 1;
 195   1              L4 = 0;
 196   1              delay1s();
 197   1              L4 = 1;
 198   1              L5 = 0;
 199   1              delay1s();
 200   1              L5 = 1;
 201   1              L6 = 0;
 202   1              delay1s();
 203   1              L6 = 1;
 204   1              L7 = 0;
 205   1              delay1s();
 206   1              L7 = 1;
 207   1              L8 = 0;
 208   1              delay1s();
 209   1              L8 = 1;
 210   1              L7 = 0;
 211   1      ////右移////
 212   1              delay1s();
 213   1              L7 = 1;
 214   1              L6 = 0;
 215   1              delay1s();
 216   1              L6 = 1;
 217   1              L5 = 0;
 218   1              delay1s();
 219   1              L5 = 1;
 220   1              L4 = 0;
 221   1              delay1s();
 222   1              L4 = 1;
 223   1              L3 = 0;
 224   1              delay1s();
 225   1              L3 = 1;
 226   1              L2 = 0;
 227   1              delay1s();
 228   1              L2 = 1;
 229   1              L1 = 0;
 230   1              delay1s();
 231   1              L1 = 1;
 232   1              delay1s();
 233   1      } 
 234          
 235          
 236          
 237          ///////////////////////////////////////////////////
 238          //函数名称:void led_4
 239          //函数功能：8个指示灯从两边倒中间依次点亮（间隔1秒）
 240          //入口参数:无
C51 COMPILER V9.57.0.0   _______LED_MAIN                                                   11/01/2021 18:25:14 PAGE 5   

 241          //出口参数:无
 242          //函数说明:
 243          ///////////////////////////////////////////////////
 244          void led_4(void)
 245          {
 246   1              L8 = 0;
 247   1              L1 = 0;
 248   1              delay1s();
 249   1              L7 = 0;
 250   1              L2 = 0;
 251   1      
 252   1              delay1s();
 253   1              L6 = 0;
 254   1              L3 = 0;
 255   1      
 256   1              delay1s();
 257   1      
 258   1              L5 = 0;
 259   1              L4 = 0;
 260   1              delay1s();
 261   1              
 262   1              L1 = 1;
 263   1              L2 = 1;
 264   1              L3 = 1;
 265   1              L4 = 1;
 266   1              L5 = 1;
 267   1              L6 = 1;
 268   1              L7 = 1;
 269   1              L8 = 1;
 270   1              delay1s();
 271   1      }
 272          
 273          ///////////////////////////////////////////////////
 274          //函数名称:void led_5
 275          //函数功能：8个指示灯从中间倒两边中间依次点亮（间隔1秒）
 276          //入口参数:无
 277          //出口参数:无
 278          //函数说明:
 279          ///////////////////////////////////////////////////
 280          void led_5(void)
 281          {
 282   1              L5 = 0;
 283   1              L4 = 0;
 284   1              delay1s();
 285   1              L6 = 0;
 286   1              L3 = 0;
 287   1              delay1s();
 288   1              L7 = 0;
 289   1              L2 = 0;
 290   1              delay1s();      
 291   1              L8 = 0;
 292   1              L1 = 0;
 293   1              delay1s();
 294   1              L1 = 1;
 295   1              L2 = 1;
 296   1              L3 = 1;
 297   1              L4 = 1;
 298   1              L5 = 1;
 299   1              L6 = 1;
 300   1              L7 = 1;
 301   1              L8 = 1;
 302   1              delay1s();      
C51 COMPILER V9.57.0.0   _______LED_MAIN                                                   11/01/2021 18:25:14 PAGE 6   

 303   1      }
 304          
 305          
 306          
 307          ///////////////////////////////////////////////////
 308          //函数名称:void delay02s(void)
 309          //函数功能:延时0.2秒的子程序
 310          //入口参数:
 311          //出口参数:
 312          //函数说明:12Mhz 一次2毫秒
 313          ///////////////////////////////////////////////////
 314          void delay02s(void)             //延时0.2秒的子程序（20*20*250*2）0.2s//
 315          {               
 316   1                      unsigned char i,j,k; /////局部变量定义
 317   1                      for(i=20;i>0;i--)   //最外层循环
 318   1                              {
 319   2                              for(j=20;j>0;j--)   // 上层循环
 320   2                                              {
 321   3                                                      for(k=248;k>0;k--) ////内层循环
 322   3                                                              {
 323   4                                                              ;
 324   4                                                              }
 325   3                                              }
 326   2                              }
 327   1      }
 328          
 329          ///////////////////////////////////////////////////
 330          //函数名称:void delay1s(void)
 331          //函数功能:延时1秒的子程序
 332          //入口参数:
 333          //出口参数:
 334          //函数说明:12Mhz 一次2毫秒
 335          ///////////////////////////////////////////////////
 336          void delay1s(void)              //延时0.2秒的子程序（20*20*250*2）0.2s//
 337          {               
 338   1                      unsigned char i,j,k; /////局部变量定义
 339   1                      for(i=100;i>0;i--)   //最外层循环
 340   1                              {
 341   2                              for(j=20;j>0;j--)   // 上层循环
 342   2                                              {
 343   3                                                      for(k=248;k>0;k--) ////内层循环
 344   3                                                              {
 345   4                                                              ;
 346   4                                                              }
 347   3                                              }
 348   2                              }
 349   1      }
 350          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    454    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
